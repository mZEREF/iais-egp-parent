<?xml version="1.0" encoding="UTF-8"?>
<sqls catalog="inspectionQuery">
    <sql key = "allotInspector" remarks = "AO Allot Task For Inspector">
        <![CDATA[
            SELECT T2.APPLICATION_NO, T2.APP_TYPE, T2.STATUS, T2.SERVICE_ID, T1.SUBMIT_DT, T3.HCI_NAME, T3.HCI_CODE FROM APPLICATION_GROUP AS T1
            JOIN APPLICATION T2 ON T2.APP_GRP_ID = T1.ID
            JOIN APP_GRP_PREMISES T3 ON T3.APP_GRP_ID = T1.ID
            WHERE 1=1
            AND T2.APP_TYPE IN ('APTY001', 'APTY002', 'APTY003')
        ]]>
    </sql>

    <sql key="listChklItem"  remarks="query chechlist items">
        <![CDATA[
                select item.id as ITEM_ID, regulation.CLAUSE_NO as CLAUSE_NO, regulation.clause as CLAUSE,
                item.question AS CHECKLISTITEM, item.answer_type as ANSWER_TYPE, item.risk_level as RISK_LEVEL,
                item.status as STATUS from chkl_config_hcsa_svc_item_pool item, chkl_config_hcsa_svc_regulation regulation where 1 = 1
                and item.regulation_id = regulation.id and item.status = 'CMSTAT001'
                <#if itemId??> and charindex(:itemId, item.id) >0</#if>
                <#if regulationClauseNo??> and charindex(:regulationClauseNo, regulation.clause_no) >0 </#if>
                <#if regulationClause??> and charindex(:regulationClause, regulation.clause) >0 </#if>
                <#if checklistItem??> and charindex(:checklistitem, item.question) >0</#if>
                <#if answerType??> and item.answer_type = :answerType</#if>
                <#if riskLevel??> and item.risk_level = :riskLevel</#if>
                <#if status??> and item.status = :status</#if>
        ]]>

    </sql>
</sqls>