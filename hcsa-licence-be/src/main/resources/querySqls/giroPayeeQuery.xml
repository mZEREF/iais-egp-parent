<?xml version="1.0" encoding="UTF-8"?>
<sqls catalog="giroPayee">
    <sql key = "searchByGiroAcctInfo" remarks="search by GIRO Payee account information">
        <![CDATA[
            SELECT distinct gai.ID, gai.ORGANIZATION_ID,
            gai.BANK_CODE, gai.BANK_NAME, gai.BRANCH_CODE, gai.ACCT_NAME, gai.ACCT_NO,
            gai.DDA_REF_NO

            FROM giro_account_info gai
            where gai.STATUS = 'CMSTAT001'
            <#if cusRefNo??> AND charindex(:cusRefNo, gai.DDA_REF_NO) >0 </#if>

        ]]>
    </sql>

    <sql key = "searchByOrgPremView" remarks="search by Organization Premises View">
        <![CDATA[
            SELECT distinct opv.ID OP_ID, opv.UEN_NO
            from organization opv
            where 1 = 1
            <#if uenNo??> AND charindex(:uenNo, opv.UEN_NO) >0 </#if>
            <#if orgIds??> AND ${orgIds} </#if>

        ]]>
    </sql>
    <sql key = "searchGiroDeduction" remarks="search ">
        <![CDATA[
        SELECT * from (
        select dbo.f_hcinameconcat(ag.ID) as HCI_NAME,
        a.ID,a.APP_GROUP_NO,a.AMOUNT,a.PMT_TYPE,a.PMT_STATUS,a.TXN_REF_NO,a.INVOICE_NO,a.ACCT_NO,a.PAY_DESC
        from hcsala.dbo.application_group as ag , giro_payment_view as a  WHERE ag.GROUP_NO=a.APP_GROUP_NO )
        t1 where 1=1 and PMT_STATUS in ('PMT09','PMT03')
        <#if groupNo??> and charindex  (:groupNo,APP_GROUP_NO)>0 </#if>
        <#if acctNo??>and charindex  (:acctNo,ACCT_NO) >0</#if>
        <#if amount??>and charindex  (:amount,AMOUNT) >0 </#if>
        <#if txnRefNo??> and charindex  (:txnRefNo,TXN_REF_NO)>0</#if>
        <#if hciName??> and charindex  (:hciName,HCI_NAME)>0</#if>
        ]]>
    </sql>

</sqls>